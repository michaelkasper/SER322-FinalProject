CREATE DATABASE  IF NOT EXISTS `TEAM05_MOVIES` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;
USE `TEAM05_MOVIES`;

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


# Dump of table GENRE
# ------------------------------------------------------------

DROP TABLE IF EXISTS `GENRE`;

CREATE TABLE `GENRE` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `NAME` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`),
  KEY `NAME` (`NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `GENRE` WRITE;
/*!40000 ALTER TABLE `GENRE` DISABLE KEYS */;

INSERT INTO `GENRE` (`ID`, `NAME`)
VALUES
	(1,'Action'),
	(2,'Drama');

/*!40000 ALTER TABLE `GENRE` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table IN_GENRE
# ------------------------------------------------------------

DROP TABLE IF EXISTS `IN_GENRE`;

CREATE TABLE `IN_GENRE` (
  `MOVIE_ID` int(11) unsigned NOT NULL,
  `GENRE_ID` int(11) unsigned NOT NULL,
  PRIMARY KEY (`MOVIE_ID`,`GENRE_ID`),
  KEY `GENRE_ID` (`GENRE_ID`),
  CONSTRAINT `IN_GENRE_ibfk_1` FOREIGN KEY (`MOVIE_ID`) REFERENCES `MOVIE` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `IN_GENRE_ibfk_2` FOREIGN KEY (`GENRE_ID`) REFERENCES `GENRE` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `IN_GENRE` WRITE;
/*!40000 ALTER TABLE `IN_GENRE` DISABLE KEYS */;

INSERT INTO `IN_GENRE` (`MOVIE_ID`, `GENRE_ID`)
VALUES
	(1,1);

/*!40000 ALTER TABLE `IN_GENRE` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table IN_MOVIE
# ------------------------------------------------------------

DROP TABLE IF EXISTS `IN_MOVIE`;

CREATE TABLE `IN_MOVIE` (
  `PROFESSIONAL_ID` int(11) unsigned NOT NULL,
  `MOVIE_ID` int(11) unsigned NOT NULL,
  `ROLE` varchar(255) NOT NULL DEFAULT '',
  `ROLE_PRIORITY` int(11) unsigned NOT NULL,
  PRIMARY KEY (`PROFESSIONAL_ID`,`MOVIE_ID`),
  KEY `MOVIE_ID_idx` (`MOVIE_ID`),
  CONSTRAINT `IN_MOVIE_ibfk_1` FOREIGN KEY (`PROFESSIONAL_ID`) REFERENCES `PROFESSIONAL` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `IN_MOVIE_ibfk_2` FOREIGN KEY (`MOVIE_ID`) REFERENCES `MOVIE` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `IN_MOVIE` WRITE;
/*!40000 ALTER TABLE `IN_MOVIE` DISABLE KEYS */;

INSERT INTO `IN_MOVIE` (`PROFESSIONAL_ID`, `MOVIE_ID`, `ROLE`, `ROLE_PRIORITY`)
VALUES
	(1,1,'Actor',1);

/*!40000 ALTER TABLE `IN_MOVIE` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table MOVIE
# ------------------------------------------------------------

DROP TABLE IF EXISTS `MOVIE`;

CREATE TABLE `MOVIE` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `NAME` varchar(255) NOT NULL DEFAULT '',
  `MPAA_RATING` varchar(5) NOT NULL,
  `PLOT_SUMMARY` text NOT NULL,
  `RELEASE_DATE` date NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `MOVIE` WRITE;
/*!40000 ALTER TABLE `MOVIE` DISABLE KEYS */;

INSERT INTO `MOVIE` (`ID`, `NAME`, `MPAA_RATING`, `PLOT_SUMMARY`, `RELEASE_DATE`)
VALUES
	(1,'Test','R','Test','2010-10-12');

/*!40000 ALTER TABLE `MOVIE` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table PROFESSIONAL
# ------------------------------------------------------------

DROP TABLE IF EXISTS `PROFESSIONAL`;

CREATE TABLE `PROFESSIONAL` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` varchar(255) NOT NULL DEFAULT '',
  `LAST_NAME` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `PROFESSIONAL` WRITE;
/*!40000 ALTER TABLE `PROFESSIONAL` DISABLE KEYS */;

INSERT INTO `PROFESSIONAL` (`ID`, `FIRST_NAME`, `LAST_NAME`)
VALUES
	(1,'Matt','Damon');

/*!40000 ALTER TABLE `PROFESSIONAL` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table RATING
# ------------------------------------------------------------

DROP TABLE IF EXISTS `RATING`;

CREATE TABLE `RATING` (
  `MOVIE_ID` int(11) unsigned NOT NULL,
  `USER_ID` int(11) unsigned NOT NULL,
  `RATING` int(1) NOT NULL,
  `DATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`USER_ID`,`MOVIE_ID`),
  KEY `MOVIE_ID_idx` (`MOVIE_ID`),
  CONSTRAINT `RATING_ibfk_1` FOREIGN KEY (`MOVIE_ID`) REFERENCES `MOVIE` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `RATING_ibfk_2` FOREIGN KEY (`USER_ID`) REFERENCES `USER` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `RATING` WRITE;
/*!40000 ALTER TABLE `RATING` DISABLE KEYS */;

INSERT INTO `RATING` (`MOVIE_ID`, `USER_ID`, `RATING`, `DATE`)
VALUES
	(1,1,5,'2017-06-21 08:16:44');

/*!40000 ALTER TABLE `RATING` ENABLE KEYS */;
UNLOCK TABLES;


# Dump of table USER
# ------------------------------------------------------------

DROP TABLE IF EXISTS `USER`;

CREATE TABLE `USER` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` varchar(255) NOT NULL DEFAULT '',
  `LAST_NAME` varchar(255) NOT NULL DEFAULT '',
  `EMAIL` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `EMAIL` (`EMAIL`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

LOCK TABLES `USER` WRITE;
/*!40000 ALTER TABLE `USER` DISABLE KEYS */;

INSERT INTO `USER` (`ID`, `FIRST_NAME`, `LAST_NAME`, `EMAIL`)
VALUES
	(1,'Mike','Kasper',NULL);

/*!40000 ALTER TABLE `USER` ENABLE KEYS */;
UNLOCK TABLES;



/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
